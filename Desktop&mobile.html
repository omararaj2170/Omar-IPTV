<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Omar IPTV Pro</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f0f0f;
  color:white;
}

/* HEADER */
header{
  display:flex;
  align-items:center;
  padding:15px 20px;
  background:#141414;
}

#menuBtn{
  font-size:24px;
  cursor:pointer;
  margin-right:15px;
}

h1{
  margin:0;
  color:#00ccff;
  font-size:20px;
}

/* Language selector */
#customLang{
  margin-left:auto;
  background:#1f1f1f;
  color:white;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  max-height:300px;
  overflow-y:auto;
}

/* LAYOUT */
#layout{display:flex;}

#sidebar{
  width:250px;
  background:#181818;
  height:100vh;
  position:fixed;
  left:-250px;
  transition:0.3s;
  padding:15px;
  overflow-y:auto;
  z-index:1000;
}

#sidebar.active{left:0;}

.sidebar-section{margin-bottom:25px;}

.sidebar-section h3{
  color:#00ccff;
  margin-bottom:10px;
}

.sidebar-section ul{
  list-style:none;
  padding:0;
}

.sidebar-section li{
  padding:8px 0;
  cursor:pointer;
  border-bottom:1px solid #333;
}

#main{
  flex:1;
  padding:20px;
  transition:0.3s;
}

#main.shift{margin-left:250px;}

/* PLAYER */
#playerContainer{
  max-width:1000px;
  margin:auto;
}

video{
  width:100%;
  border-radius:8px;
  background:black;
}

/* SEARCH */
#search{
  width:100%;
  max-width:1000px;
  margin:20px auto;
  display:block;
  padding:12px;
  border-radius:8px;
  border:none;
  font-size:16px;
  background:#1f1f1f;
  color:white;
}

/* GRID */
#channelGrid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:18px;
  max-width:1200px;
  margin:auto;
}

.channelCard{
  background:#1b1b1b;
  border-radius:8px;
  overflow:hidden;
  cursor:pointer;
  transition:0.3s;
  position:relative;
}

.channelCard:hover{
  transform:scale(1.05);
  box-shadow:0 8px 20px rgba(0,0,0,0.6);
}

.channelCard img{
  width:100%;
  height:120px;
  object-fit:contain;
  background:black;
}

.channelName{
  padding:10px;
  font-size:14px;
  text-align:center;
}

.favBtn{
  position:absolute;
  top:8px;
  right:8px;
  font-size:18px;
  color:gold;
  cursor:pointer;
}

/* LOAD MORE */
#loadMoreBtn{
  display:none;
  margin:30px auto;
  padding:10px 20px;
  border:none;
  border-radius:6px;
  background:#ff9800;
  cursor:pointer;
}

/* Footer */
footer{
  text-align:center;
  padding:15px;
  font-size:12px;
  color:#aaa;
}

/* GOOGLE TRANSLATE CLEANUP */
.goog-te-banner-frame,
.goog-logo-link,
.goog-te-gadget span{
  display:none !important;
}
</style>
</head>

<body>

<header>
  <div id="menuBtn">â˜°</div>
  <h1>Omar IPTV Pro</h1>

  <!-- Language Selector -->
  <select id="customLang">
    <option value="">ğŸŒ Language</option>
    <!-- FULL LANGUAGE LIST EXCEPT HEBREW -->
    <option value="af">Afrikaans</option>
    <option value="sq">Shqip</option>
    <option value="am">áŠ áˆ›áˆ­áŠ›</option>
    <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
    <option value="hy">Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶</option>
    <option value="az">AzÉ™rbaycan</option>
    <option value="eu">Euskara</option>
    <option value="be">Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ</option>
    <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
    <option value="bs">Bosanski</option>
    <option value="bg">Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</option>
    <option value="ca">CatalÃ </option>
    <option value="ceb">Cebuano</option>
    <option value="zh-CN">ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option>
    <option value="zh-TW">ä¸­æ–‡ï¼ˆç¹é«”ï¼‰</option>
    <option value="co">Corsu</option>
    <option value="hr">Hrvatski</option>
    <option value="cs">ÄŒeÅ¡tina</option>
    <option value="da">Dansk</option>
    <option value="nl">Nederlands</option>
    <option value="en">English</option>
    <option value="eo">Esperanto</option>
    <option value="et">Eesti</option>
    <option value="fi">Suomi</option>
    <option value="fr">FranÃ§ais</option>
    <option value="fy">Frysk</option>
    <option value="gl">Galego</option>
    <option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>
    <option value="de">Deutsch</option>
    <option value="el">Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
    <option value="gu">àª—à«àªœàª°àª¾àª¤à«€</option>
    <option value="ht">KreyÃ²l Ayisyen</option>
    <option value="ha">Hausa</option>
    <option value="haw">Ê»ÅŒlelo HawaiÊ»i</option>
    <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
    <option value="hmn">Hmoob</option>
    <option value="hu">Magyar</option>
    <option value="is">Ãslenska</option>
    <option value="ig">Igbo</option>
    <option value="id">Bahasa Indonesia</option>
    <option value="ga">Gaeilge</option>
    <option value="it">Italiano</option>
    <option value="ja">æ—¥æœ¬èª</option>
    <option value="jv">Basa Jawa</option>
    <option value="kn">à²•à²¨à³à²¨à²¡</option>
    <option value="kk">ÒšĞ°Ğ·Ğ°Ò›ÑˆĞ°</option>
    <option value="km">ááŸ’á˜áŸ‚áš</option>
    <option value="ko">í•œêµ­ì–´</option>
    <option value="ku">KurdÃ®</option>
    <option value="ky">ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·Ñ‡Ğ°</option>
    <option value="lo">àº¥àº²àº§</option>
    <option value="la">Latina</option>
    <option value="lv">LatvieÅ¡u</option>
    <option value="lt">LietuviÅ³</option>
    <option value="lb">LÃ«tzebuergesch</option>
    <option value="mk">ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸</option>
    <option value="mg">Malagasy</option>
    <option value="ms">Bahasa Melayu</option>
    <option value="ml">à´®à´²à´¯à´¾à´³à´‚</option>
    <option value="mt">Malti</option>
    <option value="mi">MÄori</option>
    <option value="mr">à¤®à¤°à¤¾à¤ à¥€</option>
    <option value="mn">ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»</option>
    <option value="my">á€™á€¼á€”á€ºá€™á€¬</option>
    <option value="ne">à¤¨à¥‡à¤ªà¤¾à¤²à¥€</option>
    <option value="no">Norsk</option>
    <option value="ny">Chichewa</option>
    <option value="or">à¬“à¬¡à¬¼à¬¿à¬†</option>
    <option value="ps">Ù¾ÚšØªÙˆ</option>
    <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
    <option value="pl">Polski</option>
    <option value="pt">PortuguÃªs</option>
    <option value="pa">à¨ªà©°à¨œà¨¾à¨¬à©€</option>
    <option value="ro">RomÃ¢nÄƒ</option>
    <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
    <option value="sm">Gagana Samoa</option>
    <option value="gd">GÃ idhlig</option>
    <option value="sr">Ğ¡Ñ€Ğ¿ÑĞºĞ¸</option>
    <option value="st">Sesotho</option>
    <option value="sn">Shona</option>
    <option value="sd">Ø³Ù†ÚŒÙŠ</option>
    <option value="si">à·ƒà·’à¶‚à·„à¶½</option>
    <option value="sk">SlovenÄina</option>
    <option value="sl">SlovenÅ¡Äina</option>
    <option value="so">Soomaali</option>
    <option value="es">EspaÃ±ol</option>
    <option value="su">Basa Sunda</option>
    <option value="sw">Kiswahili</option>
    <option value="sv">Svenska</option>
    <option value="tl">Tagalog</option>
    <option value="tg">Ğ¢Ğ¾Ò·Ğ¸ĞºÓ£</option>
    <option value="ta">à®¤à®®à®¿à®´à¯</option>
    <option value="tt">Ğ¢Ğ°Ñ‚Ğ°Ñ€</option>
    <option value="te">à°¤à±†à°²à±à°—à±</option>
    <option value="th">à¹„à¸—à¸¢</option>
    <option value="tr">TÃ¼rkÃ§e</option>
    <option value="tk">TÃ¼rkmenÃ§e</option>
    <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
    <option value="ur">Ø§Ø±Ø¯Ùˆ</option>
    <option value="ug">Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û•</option>
    <option value="uz">OÊ»zbek</option>
    <option value="vi">Tiáº¿ng Viá»‡t</option>
    <option value="cy">Cymraeg</option>
    <option value="xh">isiXhosa</option>
    <option value="yi">×™×™Ö´×“×™×©</option>
    <option value="yo">YorÃ¹bÃ¡</option>
    <option value="zu">isiZulu</option>
  </select>
</header>

<div id="layout">

<div id="sidebar">
  <div class="sidebar-section">
    <h3>Categories</h3>
    <ul id="categories"></ul>
  </div>

  <div class="sidebar-section">
    <h3>Favorites</h3>
    <ul id="favorites"></ul>
  </div>
</div>

<div id="main">

<div id="playerContainer">
<video id="player" controls playsinline></video>
</div>

<input type="text" id="search" placeholder="Search channels...">

<div id="channelGrid"></div>

<div style="text-align:center;">
<button id="loadMoreBtn">Load More</button>
</div>

</div>
</div>

<footer>
Powered by Google Translate Â· Hosted on GitHub Pages
</footer>

<div id="google_translate_element"></div>

<script>
const playlistURL="playlist.m3u";
const player=document.getElementById("player");
const grid=document.getElementById("channelGrid");
const searchInput=document.getElementById("search");
const sidebar=document.getElementById("sidebar");
const main=document.getElementById("main");
const categoriesList=document.getElementById("categories");
const favoritesList=document.getElementById("favorites");
const loadMoreBtn=document.getElementById("loadMoreBtn");

let channels=[];
let categories={};
let visibleChannels=[];
let currentIndex=0;
const batchSize=24;
let favorites=JSON.parse(localStorage.getItem("favorites")||"[]");

document.getElementById("menuBtn").onclick=()=>{
  sidebar.classList.toggle("active");
  main.classList.toggle("shift");
};

/* RENDER GRID */
function renderChannels(list){
  visibleChannels=list;
  currentIndex=0;
  grid.innerHTML="";
  loadMoreBtn.style.display="block";
  loadNextBatch();
}

function loadNextBatch(){
  const batch=visibleChannels.slice(currentIndex,currentIndex+batchSize);

  batch.forEach(ch=>{
    const card=document.createElement("div");
    card.className="channelCard";

    card.innerHTML=`
      <img src="${ch.logo || 'https://via.placeholder.com/300x150'}"
           loading="lazy"
           onerror="this.src='https://via.placeholder.com/300x150'">
      <div class="channelName">${ch.name}</div>
      <div class="favBtn">â˜…</div>
    `;

    card.onclick=()=>playStream(ch.url);
    card.querySelector(".favBtn").onclick=(e)=>{
      e.stopPropagation();
      toggleFavorite(ch);
    };

    grid.appendChild(card);
  });

  currentIndex+=batchSize;
  if(currentIndex>=visibleChannels.length){
    loadMoreBtn.style.display="none";
  }
}

loadMoreBtn.onclick=loadNextBatch;

/* PLAY */
function playStream(url){
  if(url.endsWith(".m3u8") && Hls.isSupported()){
    const hls=new Hls();
    hls.loadSource(url);
    hls.attachMedia(player);
  }else{
    player.src=url;
  }
  player.play();
}

/* FAVORITES */
function toggleFavorite(ch){
  const exists=favorites.find(c=>c.url===ch.url);
  if(exists){
    favorites=favorites.filter(c=>c.url!==ch.url);
  }else{
    favorites.push(ch);
  }
  localStorage.setItem("favorites",JSON.stringify(favorites));
  renderFavorites();
}

function renderFavorites(){
  favoritesList.innerHTML="";
  favorites.forEach(c=>{
    const li=document.createElement("li");
    li.textContent=c.name;
    li.onclick=()=>renderChannels([c]);
    favoritesList.appendChild(li);
  });
}

/* LOAD PLAYLIST */
fetch(playlistURL)
.then(r=>r.text())
.then(text=>{
  const lines=text.split(/\r?\n/);
  let current={};

  lines.forEach(line=>{
    if(line.startsWith("#EXTINF")){
      current.name=line.match(/,(.*)$/)?.[1]||"Unnamed";
      current.category=line.match(/group-title="([^"]+)"/)?.[1]||"Other";
      current.logo=line.match(/tvg-logo="([^"]+)"/)?.[1]||"";
    }
    else if(line && !line.startsWith("#")){
      current.url=line.trim();
      channels.push(current);

      if(!categories[current.category]) categories[current.category]=[];
      categories[current.category].push(current);

      current={};
    }
  });

  renderChannels(channels);
  renderCategories();
});

/* CATEGORIES */
function renderCategories(){
  categoriesList.innerHTML="";
  Object.keys(categories).forEach(cat=>{
    const li=document.createElement("li");
    li.textContent=cat;
    li.onclick=()=>renderChannels(categories[cat]);
    categoriesList.appendChild(li);
  });
}

/* SEARCH */
searchInput.addEventListener("input",()=>{
  const q=searchInput.value.toLowerCase();
  renderChannels(channels.filter(c=>c.name.toLowerCase().includes(q)));
});

renderFavorites();

/* GOOGLE TRANSLATE */
function googleTranslateElementInit(){
  new google.translate.TranslateElement({pageLanguage:'en', autoDisplay:false},'google_translate_element');
}

function changeLanguage(lang){
  const combo = document.querySelector(".goog-te-combo");
  if(!combo) return;
  combo.value = lang;
  combo.dispatchEvent(new Event("change"));
}

document.getElementById("customLang").addEventListener("change", e=>{
  if(e.target.value) changeLanguage(e.target.value);
});
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>