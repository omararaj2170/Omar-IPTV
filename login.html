<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login / Sign Up</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background:#121212;
    color:#eee;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
  }

  h1 {
    color:#00ccff;
    margin-bottom:20px;
  }

  form {
    display:flex;
    flex-direction:column;
    gap:10px;
    background:#1e1e1e;
    padding:20px;
    border-radius:8px;
    width:90%;
    max-width:400px;
  }

  input {
    padding:10px;
    border-radius:6px;
    border:none;
    font-size:16px;
    background:#2a2a2a;
    color:#fff;
  }

  button {
    padding:10px;
    border-radius:6px;
    border:none;
    font-size:16px;
    background:#00ccff;
    color:#000;
    cursor:pointer;
  }

  #toggleForm {
    margin-top:10px;
    text-align:center;
    font-size:14px;
  }

  #toggleForm a {
    color:#00ccff;
    cursor:pointer;
    text-decoration:none;
  }
</style>
</head>
<body>

<h1 id="formTitle">Sign In</h1>

<form id="authForm">
  <input type="text" id="username" placeholder="Username" required>
  <input type="email" id="email" placeholder="Email" required style="display:none;">
  <input type="tel" id="phone" placeholder="Phone number" required style="display:none;">
  <input type="password" id="password" placeholder="Password" required>
  <input type="password" id="confirmPassword" placeholder="Confirm Password" required style="display:none;">
  <button type="submit">Sign In</button>
</form>

<div id="toggleForm">
  Don't have an account? <a id="switchForm">Sign Up</a>
</div>

<script>
const formTitle = document.getElementById("formTitle");
const authForm = document.getElementById("authForm");
const toggleForm = document.getElementById("toggleForm");
const switchForm = document.getElementById("switchForm");

const usernameInput = document.getElementById("username");
const emailInput = document.getElementById("email");
const phoneInput = document.getElementById("phone");
const passwordInput = document.getElementById("password");
const confirmPasswordInput = document.getElementById("confirmPassword");

let isSignUp = false;

switchForm.addEventListener("click",()=>{
  isSignUp = !isSignUp;
  if(isSignUp){
    formTitle.textContent="Sign Up";
    authForm.querySelector("button").textContent="Sign Up";
    emailInput.style.display="block";
    phoneInput.style.display="block";
    confirmPasswordInput.style.display="block";
    toggleForm.innerHTML='Already have an account? <a id="switchForm">Sign In</a>';
  } else {
    formTitle.textContent="Sign In";
    authForm.querySelector("button").textContent="Sign In";
    emailInput.style.display="none";
    phoneInput.style.display="none";
    confirmPasswordInput.style.display="none";
    toggleForm.innerHTML='Don\'t have an account? <a id="switchForm">Sign Up</a>';
  }
  document.getElementById("switchForm").addEventListener("click",()=>switchForm.click());
});

authForm.addEventListener("submit",(e)=>{
  e.preventDefault();
  const username = usernameInput.value.trim();
  const password = passwordInput.value.trim();

  if(isSignUp){
    const email = emailInput.value.trim();
    const phone = phoneInput.value.trim();
    const confirmPassword = confirmPasswordInput.value.trim();
    if(password!==confirmPassword){ alert("Passwords do not match!"); return; }

    const userData = {username,email,phone,password};
    localStorage.setItem("iptvUser",JSON.stringify(userData));
    localStorage.setItem("iptvUsername",username);
    alert("Sign Up Successful!");
    window.location.href="index.html";
  } else {
    const stored = JSON.parse(localStorage.getItem("iptvUser"));
    if(!stored || stored.username!==username || stored.password!==password){
      alert("Invalid username or password");
      return;
    }
    localStorage.setItem("iptvUsername",username);
    alert("Sign In Successful!");
    window.location.href="index.html";
  }
});
</script>

</body>
</html>