<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPTV Loader</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f0f0f0; }
  h1 { color: #333; }
  ul { list-style-type: none; padding: 0; }
  li { padding: 5px 0; }
  a { text-decoration: none; color: #0077cc; }
  /* Hide both versions by default */
  #pcView, #mobileView { display: none; }
</style>
</head>
<body>

<h1>IPTV Playlist</h1>

<input type="file" id="m3uFile" accept=".m3u,.m3u8">

<!-- PC version -->
<div id="pcView">
  <h2>PC Version</h2>
  <ul id="pcList"></ul>
</div>

<!-- Mobile version -->
<div id="mobileView">
  <h2>Mobile Version</h2>
  <ul id="mobileList"></ul>
</div>

<script>
  // Detect device
  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

  // Show the correct view
  const pcView = document.getElementById("pcView");
  const mobileView = document.getElementById("mobileView");

  if(isMobile) {
    mobileView.style.display = "block";
  } else {
    pcView.style.display = "block";
  }

  // File reading
  const fileInput = document.getElementById("m3uFile");
  const pcList = document.getElementById("pcList");
  const mobileList = document.getElementById("mobileList");

  fileInput.addEventListener("change", function() {
    const file = this.files[0];
    if(!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
      const text = e.target.result;
      const lines = text.split(/\r?\n/);

      // Clear previous lists
      pcList.innerHTML = "";
      mobileList.innerHTML = "";

      for(let i = 0; i < lines.length; i++) {
        const line = lines[i].trim();
        if(line && !line.startsWith("#")) {
          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = line;
          a.target = "_blank";
          a.textContent = line;

          li.appendChild(a);

          // Append to both lists, so each version has its own
          pcList.appendChild(li.cloneNode(true));
          mobileList.appendChild(li.cloneNode(true));
        }
      }
    };
    reader.readAsText(file);
  });
</script>

</body>
</html>
